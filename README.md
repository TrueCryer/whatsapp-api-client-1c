# Демо обработка для работы с WhatsApp из 1С
Репозиторий представляет собой исходники конфигурации в формате выгрузки xml файлов с одной обработкой. Из обработки можно отправить сообщение к себе на WhatsApp. Интеграция с WhatsApp сделана через REST сервис [green-api.com](https://green-api.com/)

Интерфейс обработки

## Требования
* Платформа 1С не ниже версии 8.3.10
* ``API Token`` и ``ID Instance``, полученные через сервис [green-api.com](https://green-api.com/)

## Сценарии работы

### 1. Подключение к сервису green-api

1. Подключиться к сервису [green-api.com](https://green-api.com/) и получить ``API Token`` и ``ID Instance``
1. [Скачать обработку](https://github.com/green-api/whatsapp-1c-example/releases/download/1.0/WhatsApp1cExample.epf) в формате epf
3. Запустить в браузере или тонком клиенте и указать параметры подключения (``API Token`` и ``ID Instance``)
4. Сканировать QR код с мобильного телефона WhatsApp (Меню чаты -> Иконка всех функций -> WhatsApp Web)
6. В форме обработки нажать кнопку ``Проверить подключение / Сканировать QR Код``. Поле формы статус должно изменится на "Подключен"

![`Отправка сообщения`](media/Login.png)

### 2. Отправка сообщения
1. Подключиться к сервису (см. выше п.1)
2. Перейти на вкладку ``Отправка сообщений``
2. Указать телефон получателя и текст соообщения
7. Нажать кнопку ``Отправить``

![`Отправка сообщения`](media/main.png)

### 3. Получение сообщения
1. Отправить тестовое сообщение (см. выше п.2)
2. Перейти на вкладку ``Получение сообщений``
3. Нажать на кнопку ``Получить сообщенние``. Если сообщение было отправлено, то в поле ``Текст сообщение`` и ``Тег сообщения``  заполнятся данными. Если нет отправленных сообщенимй - то обработка будет ждать 20 секунд для получения сообщения.

![`Получение сообщения`](media/GettingMsgs.png)

## Установка проекта

Исходники в репозитории - это xml выгрузка из конфигуратора 1С версии 8.3.16 в режиме совместимости с 8.3.10. Скачайте исходники с репозитория и загрузите в конфигуратор с помощью команды ``Конфигурация`` -> ``Загрузить конфигурацию из файлов``
